webpackJsonp([1],{CZIA:function(e,t){},KNEP:function(e,t){},N28z:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(e){a("yGYl")},null,null).exports,i=a("/ocq"),s=a("//Fk"),l=a.n(s),c=a("mtWM"),u=a.n(c);u.a.defaults.baseURL="http://localhost:8888/api/private/v1/",u.a.interceptors.request.use(function(e){var t=localStorage.getItem("loginToken");return t&&(e.headers.Authorization=t),e},function(e){return l.a.reject(e)});var d=function(e){return u.a.get("users",e).then(function(e){return e.data})},m=function(){return u.a.get("roles").then(function(e){return e.data})},f=function(e){return u.a.get("rights/"+e.type).then(function(e){return e.data})},p=function(e){return u.a.get("categories",{params:e}).then(function(e){return e.data})},g={data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{loginSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a;(a=t.form,u.a.post("login",a).then(function(e){return e.data})).then(function(e){200===e.meta.status?(localStorage.setItem("loginToken",e.data.token),t.$store.commit("setUserName",e.data.username),t.$router.push({name:"Home"})):t.$message({message:e.meta.msg,type:"error"})})})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("el-form",{ref:"form",staticClass:"container",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:a("lS+k"),alt:""}})])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{placeholder:"用户名","prefix-icon":"myicon myicon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:"密码","prefix-icon":"myicon myicon-key",type:"password"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginSubmit("form")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){e.loginSubmit("form")}}},[e._v("登陆")])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(g,h,!1,function(e){a("qfCV")},"data-v-b314dc10",null).exports,b={data:function(){return{isCollapse:!1,menuList:[]}},created:function(){var e=this;u.a.get("menus").then(function(e){return e.data}).then(function(t){e.menuList=t.data})},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},toggleCollapse:function(){this.isCollapse=!this.isCollapse},loginOut:function(){localStorage.removeItem("loginToken"),this.$router.push({name:"Login"})}},mounted:function(){d({params:{query:"",pagenum:1,pagesize:10}}).then(function(e){})}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-container",[a("el-aside",{attrs:{width:"auto"}},[a("div",{staticClass:"logo"}),e._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo el-menu-admin",attrs:{router:!0,collapse:e.isCollapse,"background-color":"#545c64","unique-opened":!0,"text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menuList,function(t){return a("el-submenu",{key:t.id,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v(e._s(t.authName))])]),e._v(" "),e._l(t.children,function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.path}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.authName))])])})],2)}))],1),e._v(" "),a("el-container",[a("el-header",[a("span",{staticClass:"myicon myicon-menu toggle-btn",on:{click:e.toggleCollapse}}),e._v(" "),a("div",{staticClass:"system-title"},[e._v("电商后台管理系统")]),e._v(" "),a("div",[a("div",{staticClass:"welcome"},[a("span",[e._v("你好："+e._s(e.$store.getters.currentUserName))]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.loginOut}},[e._v("退出")])],1)])]),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(b,_,!1,function(e){a("o/Xs")},"data-v-1faaeb0c",null).exports,w={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    欢迎使用电商后台管理系统\n")])},staticRenderFns:[]};var k=a("VU/8")({},w,!1,function(e){a("f4I0")},"data-v-b8678c3c",null).exports,x={data:function(){return{userList:[],queryString:"",total:0,pagesize:3,pagenum:1,loading:!0,addDialogFormVisible:!1,editDialogFormVisible:!1,grantDialogFormVisible:!1,addform:{username:"",password:"",email:"",mobile:""},editform:{id:0,username:"",email:"",mobile:""},grantform:{username:"",id:""},roleList:[],roleId:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}]}}},created:function(){this.getList()},methods:{showGrantUserBox:function(e){var t=this;this.grantform.username=e.username,this.grantform.id=e.id,m().then(function(e){200===e.meta.status&&(t.roleList=e.data)}),this.grantDialogFormVisible=!0},grantUser:function(){var e,t=this;console.log({id:this.grantform.id,rid:this.roleId}),this.roleId?(e={id:this.grantform.id,rid:this.roleId},u.a.put("users/"+e.id+"/role",{id:e.id,rid:e.rid}).then(function(e){return e.data})).then(function(e){200===e.meta.status&&(t.$message({message:"分配角色成功",type:"success"}),t.grantDialogFormVisible=!1)}):this.$message({message:"请选择角色",type:"warining"})},showDeleteBox:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e,u.a.delete("users/"+a).then(function(e){return e.data})).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},editUser:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return alert("123"),!1;var n;(n=t.editform,u.a.put("users/"+n.id,n).then(function(e){return e.data})).then(function(a){console.log(a),200===a.meta.status&&(t.$message({message:"编辑用户成功",type:"success"}),t.editDialogFormVisible=!1,t.getList(),t.$refs[e].resetFields())})})},showEditUserDialog:function(e){this.editDialogFormVisible=!0,this.editform.username=e.username,this.editform.email=e.email,this.editform.mobile=e.mobile,this.editform.id=e.id,console.log("------"),console.log(e),console.log("------")},addUser:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return alert("123"),!1;var n;(n=t.addform,u.a.post("users",n).then(function(e){return e.data})).then(function(a){console.log(a),201===a.meta.status&&(t.$message({message:"创建用户成功",type:"success"}),t.addDialogFormVisible=!1,t.getList(),t.$refs[e].resetFields())})})},resetFor:function(e){this.$refs[e].resetFields(),this.addDialogFormVisible=!1,this.editDialogFormVisible=!1},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.getList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.getList()},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},changeState:function(e){var t,a=this;console.log(e),(t={uid:e.id,type:e.mg_state},u.a.put("users/"+t.uid+"/state/"+t.type).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status?a.$message({message:"修改用户状态成功",type:"success"}):a.$message({message:e.meta.msg,type:"warning"})})},getList:function(){var e=this;this.loading=!0,d({params:{query:this.queryString,pagenum:this.pagenum,pagesize:this.pagesize}}).then(function(t){console.log(t),e.userList=t.data.users,e.total=t.data.total,e.loading=!1})}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户列表")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getList(t):null}},model:{value:e.queryString,callback:function(t){e.queryString=t},expression:"queryString"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getList},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加用户")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.changeState(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""},on:{click:function(a){e.showEditUserDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(a){e.showDeleteBox(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-check",size:"mini",plain:""},on:{click:function(a){e.showGrantUserBox(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,15,20],"page-size":3,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addform",attrs:{model:e.addform,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.username,callback:function(t){e.$set(e.addform,"username",t)},expression:"addform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.password,callback:function(t){e.$set(e.addform,"password",t)},expression:"addform.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.email,callback:function(t){e.$set(e.addform,"email",t)},expression:"addform.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.mobile,callback:function(t){e.$set(e.addform,"mobile",t)},expression:"addform.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetFor("addform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUser("addform")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"editform",attrs:{model:e.editform,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.editform.username,callback:function(t){e.$set(e.editform,"username",t)},expression:"editform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editform.email,callback:function(t){e.$set(e.editform,"email",t)},expression:"editform.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editform.mobile,callback:function(t){e.$set(e.editform,"mobile",t)},expression:"editform.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetFor("editform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editUser("editform")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.grantDialogFormVisible},on:{"update:visible":function(t){e.grantDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.grantform,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"当前用户：",prop:"username"}},[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.grantform.username))])],1),e._v(" "),a("el-form-item",{attrs:{label:"请选择角色："}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetFor("editform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.grantUser()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(x,C,!1,function(e){a("CZIA")},"data-v-76d1c47e",null).exports,$={data:function(){return{loading:!0,rightsList:[]}},filters:{formatLevel:function(e){return"0"===e?"一级":"0"===e?"二级":"三级"}},created:function(){var e=this;this.loading=!0,f({type:"list"}).then(function(t){200===t.meta.status&&(e.rightsList=t.data,e.loading=!1)})}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rights"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限列表")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightsList,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authName",label:"权限名称",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"path",label:"路径",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{label:"层级路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatLevel")(t.row.level)))])]}}])})],1)],1)},staticRenderFns:[]};var I=a("VU/8")($,F,!1,function(e){a("wkWU")},"data-v-0f0d874a",null).exports,L=a("pFYg"),V=a.n(L),R=a("lHA8"),z=a.n(R),D=a("Gu7T"),U=a.n(D),N={data:function(){return{roleList:[],dialogFormVisible:!1,rolesList:[],currentRow:{},defaultProps:{children:"children",label:"authName"},selectedRightId:[]}},created:function(){this.initList()},methods:{initList:function(){var e=this;m().then(function(t){200===t.meta.status&&(e.roleList=t.data)})},grantRoleSubmit:function(){var e=this,t=this.$refs.tree.getCheckedNodes();console.log(t);var a=t.map(function(e){return e.id+","+e.pid}).join(",").split(","),n=[].concat(U()(new z.a(a)));console.log(n),console.log(void 0===n?"undefined":V()(n)),function(e,t){return console.log(e+":"+t),u.a.post("roles/"+e+"/rights",t).then(function(e){return console.log(e.data),e.data})}(this.currentRow.id,{rids:n.join(",")}).then(function(t){200===t.meta.status&&(e.$message({type:"success",message:t.meta.msg}),e.dialogFormVisible=!1,e.initList())})},deleteRoleRight:function(e,t){var a,n=this;(a={roleId:e.id,rightId:t},console.log(a),u.a.delete("roles/"+a.roleId+"/rights/"+a.rightId).then(function(e){return e.data})).then(function(t){200===t.meta.status?e.children=t.data:n.$message({type:"error",message:t.meta.msg})})},showGrantDialog:function(e){var t=this;this.dialogFormVisible=!0,this.currentRow=e,f({type:"tree"}).then(function(e){200===e.meta.status?t.rolesList=e.data:t.$message({type:"error",message:e.meta.msg})}),this.selectedRightId.length=0,this.currentRow.children.forEach(function(e){e.children&&e.children.length>0&&e.children.forEach(function(e){e.children&&e.children.length>0&&e.children.forEach(function(e){t.selectedRightId.push(e.id)})})})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色列表")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"success",plain:""}},[e._v("添加角色")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.roleList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.children,function(n){return a("el-row",{key:n.id,staticStyle:{"margin-top":"5px"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:""},on:{close:function(a){e.deleteRoleRight(t.row,n.id)}}},[e._v("\n                        "+e._s(n.authName)+"\n                        ")]),e._v(" "),0!==n.children.length?a("span",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(n.children,function(n){return a("el-row",{key:n.id},[a("el-col",{attrs:{span:3}},[a("el-tag",{attrs:{closable:"",type:"success"},on:{close:function(a){e.deleteRoleRight(t.row,n.id)}}},[e._v("\n                                "+e._s(n.authName)+"\n                                ")]),e._v(" "),0!==n.children.length?a("span",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:21}},e._l(n.children,function(n){return a("el-tag",{key:n.id,attrs:{closable:"",type:"danger"},on:{close:function(a){e.deleteRoleRight(t.row,n.id)}}},[e._v("\n                                "+e._s(n.authName)+"\n                                ")])}))],1)}))],1)}),e._v(" "),a("el-row",[0==t.row.children.length?a("el-col",{attrs:{span:24}},[e._v("该角色还没有分配权限，请前往分配")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"roleDesc",width:"110px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:"",title:"编辑"}}),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete",size:"mini",plain:"",title:"删除"}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-check",size:"mini",plain:"",title:"授权角色"},on:{click:function(a){e.showGrantDialog(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"授权角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"roleContainer"},[a("el-tree",{ref:"tree",attrs:{data:e.rolesList,"show-checkbox":"",accordion:!0,"node-key":"id","default-expand-all":!0,"default-checked-keys":e.selectedRightId,props:e.defaultProps}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.grantRoleSubmit}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var q=a("VU/8")(N,E,!1,function(e){a("N28z")},"data-v-b3ed3092",null).exports,O=a("c/Tr"),A=a.n(O),T={name:"tree-grid",props:{treeStructure:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}},controls:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1}},data:function(){return{}},computed:{data:function(){if(this.treeStructure){var e=this.handleData(this.dataSource,null,null,this.defaultExpandAll);return e}return this.dataSource}},methods:{handleData:function(e,t,a,n){var o=this,r=[];return A()(e).forEach(function(e){void 0===e._expanded&&o.$set(e,"_expanded",n),t&&o.$set(e,"_parent",t);var i=0;if(void 0!==a&&null!==a&&(i=a+1),o.$set(e,"_level",i),r.push(e),e.children&&e.children.length>0){var s=o.handleData(e.children,e,i,n);r=r.concat(s)}}),r},showRow:function(e){var t=e.row,a=(e.rowIndex,!t._parent||t._parent._expanded&&t._parent._show);return t._show=a,a?"":"display:none;"},toggle:function(e){var t=this.data[e];t._expanded=!t._expanded},spaceIconShow:function(e){return!(!this.treeStructure||0!==e)},toggleIconShow:function(e,t){return!!(this.treeStructure&&0===e&&t.children&&t.children.length>0)},getCateInfoById:function(e){this.$emit("editCate",e.cat_id)},deleteCategory:function(e){this.$emit("deleteCate",e.cat_id)}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.data,border:"","row-style":e.showRow}},[e._l(e.columns,function(t,n){return a("el-table-column",{key:t.dataIndex,attrs:{width:t.width,label:t.text},scopedSlots:e._u([{key:"default",fn:function(o){return[e._l(o.row._level,function(t,o){return e.spaceIconShow(n)?a("span",{key:o,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.toggleIconShow(n,o.row)?a("el-button",{attrs:{type:"success",plain:"",size:"mini",round:""},on:{click:function(t){e.toggle(o.$index)}}},[o.row._expanded?e._e():a("i",{staticClass:"el-icon-plus",attrs:{"aria-hidden":"true"}}),e._v(" "),o.row._expanded?a("i",{staticClass:"el-icon-minus",attrs:{"aria-hidden":"true"}}):e._e()]):0===n?a("el-button",{attrs:{size:"mini",disabled:"",round:""}},[a("i",{staticClass:"el-icon-minus"})]):0===n?a("span",{staticClass:"ms-tree-space"}):e._e(),e._v("\n      "+e._s(o.row[t.dataIndex])+"\n    ")]}}])})}),e._v(" "),e.controls?a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",title:"修改商品分类",type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){e.getCateInfoById(t.row)}}}),e._v(" "),a("el-button",{attrs:{plain:"",title:"删除商品分类",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){e.deleteCategory(t.row)}}})]}}])}):e._e()],2)},staticRenderFns:[]};var B={data:function(){return{addform:{cat_name:"aa",cat_pid:0,cat_level:0},addDialogFormVisible:!1,columns:[{text:"分类名称",dataIndex:"cat_name",width:""},{text:"是否有效",dataIndex:"cat_deleted",width:""},{text:"排序",dataIndex:"cat_level",width:""}],dataSource:[],options:[],selectedOptions:[],props:{value:"cat_id",label:"cat_name"},total:0,pagesize:5,pagenum:1,rules:{categoryname:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},created:function(){this.initList()},methods:{addcategory:function(e){var t=this;this.$refs[e].validate(function(e){var a;e&&(0===t.selectedOptions.length?(t.addform.cat_pid=0,t.addform.cat_level=0):1===t.selectedOptions.length?(t.addform.cat_pid=t.selectedOptions[0],t.addform.cat_level=1):(t.addform.cat_pid=t.selectedOptions[1],t.addform.cat_level=2),(a=t.addform,u.a.post("categories",a).then(function(e){return e.data})).then(function(e){console.log(e),201===e.meta.status&&(t.addDialogFormVisible=!1,t.initList(),t.$message({type:"success",message:e.meta.msg}))}))})},addCateDialog:function(){var e=this;this.addDialogFormVisible=!0,p({type:"2"}).then(function(t){console.log(t.data),200===t.meta.status&&(e.options=t.data)})},handleChange:function(e){console.log(e)},initList:function(){var e=this;p({pagesize:this.pagesize,pagenum:this.pagenum,type:"3"}).then(function(t){200===t.meta.status&&(e.total=t.data.total,e.dataSource=t.data.result)})},deleteCategory:function(e){console.log(e)},editCategory:function(e){console.log(e)},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.initList()}},components:{TreeGrid:a("VU/8")(T,G,!1,function(e){a("xoAv")},"data-v-704ec3dc",null).exports}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("分类分类")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"success",plain:""},on:{click:e.addCateDialog}},[e._v("添加分类")])],1)],1),e._v(" "),a("tree-grid",{attrs:{treeStructure:!0,columns:e.columns,"data-source":e.dataSource},on:{deleteCate:e.deleteCategory,editCate:e.editCategory}}),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addform",attrs:{model:e.addform,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.cat_name,callback:function(t){e.$set(e.addform,"cat_name",t)},expression:"addform.cat_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级名称"}},[a("el-cascader",{attrs:{options:e.options,props:e.props},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetFor("addform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addcategory("addform")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var H=a("VU/8")(B,j,!1,function(e){a("KNEP")},"data-v-1a6b7d96",null).exports,P={data:function(){return{active:0,activeName:"first"}},methods:{handleSuccess:function(e,t,a){console.log(a),200===e.meta.status&&this.$message({type:"success",message:e.meta.msg})},setHeaderOfToken:function(){return{Authorization:localStorage.getItem("loginToken")}},next:function(){this.active++>4&&(this.active=0)},handleClick:function(e,t){switch(console.log(e,t),e.name){case"first":this.active=0;break;case"second":this.active=1;break;case"third":this.active=2;break;case"fourth":this.active=3;break;case"fifth":this.active=4}},handlePreview:function(){},handleRemove:function(){}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("添加商品")])],1)],1)],1),e._v(" "),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"步骤 1"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 3"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 4"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 5"}})],1),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[e._v("基本信息")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品参数",name:"second"}},[e._v("商品参数")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品属性",name:"third"}},[e._v("商品属性")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品图片",name:"fourth"}},[a("el-upload",{attrs:{action:"http://localhost:8888/api/private/v1/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,headers:e.setHeaderOfToken(),"on-success":e.handleSuccess,multiple:!0,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品内容",name:"fifth"}},[e._v("商品内容")])],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(P,W,!1,function(e){a("smde")},"data-v-0e28ef93",null).exports,K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品列表")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},model:{value:e.queryString,callback:function(t){e.queryString=t},expression:"queryString"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:e.addGoods}},[e._v("添加用户")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")({data:function(){return{queryString:""}},methods:{addGoods:function(){this.$router.push({name:"AddGoods"})}}},K,!1,function(e){a("Tu77")},"data-v-1cc46bc2",null).exports;n.default.use(i.a);var X=new i.a({routes:[{path:"/login",name:"Login",component:v},{path:"/",name:"Home",component:y,redirect:{path:"welcome"},children:[{name:"Welcome",path:"welcome",component:k},{name:"Users",path:"users",component:S},{name:"Rights",path:"rights",component:I},{name:"Roles",path:"roles",component:q},{name:"Category",path:"categories",component:H},{name:"Goods",path:"goods",component:M},{name:"AddGoods",path:"toadd",component:Y}]}]}),Z=a("zL8q"),J=a.n(Z),Q=(a("tvR6"),a("NYxO"));n.default.use(Q.a);var ee={setUserName:function(e,t){e.username=t,localStorage.setItem("username",t)}},te={currentUserName:function(e){return localStorage.getItem("username"),localStorage.getItem("username")}},ae=new Q.a.Store({state:{username:""},getters:te,actions:{setUserNameAction:function(e,t){return(0,e.commit)("setUserName",t.username)}},mutations:ee});a("yh13");n.default.use(J.a),n.default.config.productionTip=!1,X.beforeEach(function(e,t,a){localStorage.getItem("loginToken")?a():"/login"!==e.path?a({path:"/login"}):a()}),new n.default({el:"#app",router:X,store:ae,components:{App:r},template:"<App/>"})},Tu77:function(e,t){},f4I0:function(e,t){},"lS+k":function(e,t,a){e.exports=a.p+"static/img/avatar.520d72a.jpg"},"o/Xs":function(e,t){},qfCV:function(e,t){},smde:function(e,t){},tvR6:function(e,t){},wkWU:function(e,t){},xoAv:function(e,t){},yGYl:function(e,t){},yh13:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.50dfcd651de3f1458972.js.map